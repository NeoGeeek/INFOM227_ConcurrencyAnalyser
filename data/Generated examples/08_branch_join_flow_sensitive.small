// Example 08: Flow-sensitive join across if/else with an active thread
function writeA() { a = 1; return a; }  // Thread W(a)

function main() {
  a = 0;
  cond = 1;
  t = spawn writeA();     // active thread W(a)

  if (cond == 1) {
    x = a + 0;            // Parent R(a) => race expected vs W(a)
  } else {
    a = a + 1;            // Parent R/W(a) => race expected vs W(a)
  }

  await t;
  return 0;
}
