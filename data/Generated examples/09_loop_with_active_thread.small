// Example 09: Loop with repeated accesses while a thread is active (fixpoint / join stress)
function writeA() { a = a + 1; return a; }   // Thread R/W(a)

function main() {
  a = 0;
  i = 0;
  t = spawn writeA();      // active thread R/W(a)

  while (i < 3) {
    x = a + 0;             // Parent R(a) => race expected vs thread W(a)
    i = i + 1;
  }

  await t;
  return a;
}
