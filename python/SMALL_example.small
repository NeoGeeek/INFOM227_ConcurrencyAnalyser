function inc(n) {
  var i := 0;
  while (i < n) {
    /* racy critical section */
    x := x + 1;
    i := i + 1;
  }
  return 0;
}

function main() {
  /*shared*/ var x := 0;
  var t := spawn inc(1000);
  var u := spawn inc(1000);
  join t; join u;
  return x;   // With races: non-deterministic, typically < 2000
}
